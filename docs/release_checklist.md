# 发布检查清单

## 发布前检查

### 1. 代码质量

-   [ ] 所有测试通过
-   [ ] 代码检查通过 (ruff, mypy)
-   [ ] 无已知 bug
-   [ ] 文档完整

### 2. 版本信息

-   [ ] 版本号符合语义化版本规范
-   [ ] `pyproject.toml` 版本号正确
-   [ ] `__init__.py` 版本号正确
-   [ ] `CHANGELOG.md` 更新

### 3. 依赖管理

-   [ ] `requirements.txt` 更新
-   [ ] `pyproject.toml` 依赖正确
-   [ ] 可选依赖标记正确

### 4. 文档

-   [ ] README.md 更新
-   [ ] API 文档完整
-   [ ] 示例代码正确
-   [ ] 迁移指南更新

### 5. 测试

-   [ ] 单元测试通过
-   [ ] 集成测试通过
-   [ ] 环境检查通过
-   [ ] 示例代码可运行

## 发布流程

### 1. 准备阶段

```bash
# 检查Git状态
git status

# 运行测试
python -m pytest

# 运行代码检查
ruff check .
mypy xtdamo/
```

### 2. 版本发布

```bash
# 使用发布脚本
python scripts/release.py 0.1.1

# 或手动执行
python -m build
twine check dist/*
twine upload dist/*
git tag -a v0.1.1 -m "Release version 0.1.1"
```

### 3. 发布后检查

-   [ ] PyPI 页面显示正确
-   [ ] 分发包可正常安装
-   [ ] 文档链接正确
-   [ ] 版本信息正确

## 发布类型

### 补丁版本 (0.1.x)

-   修复 bug
-   文档更新
-   小改进

### 次版本 (0.x.0)

-   新功能
-   API 增强
-   性能优化

### 主版本 (x.0.0)

-   重大变更
-   API 不兼容
-   架构调整

## 发布后任务

### 1. 通知

-   [ ] 更新项目主页
-   [ ] 发送发布通知
-   [ ] 更新相关文档

### 2. 监控

-   [ ] 检查安装统计
-   [ ] 监控错误报告
-   [ ] 收集用户反馈

### 3. 后续计划

-   [ ] 规划下个版本
-   [ ] 记录改进点
-   [ ] 更新路线图

## 紧急回滚

### 如果发布有问题

```bash
# 删除错误标签
git tag -d v0.1.1
git push origin :refs/tags/v0.1.1

# 从PyPI删除包 (需要联系PyPI管理员)
# 或发布修复版本
python scripts/release.py 0.1.2
```

## 发布记录

### v0.1.0 (2025-01-XX)

-   初始版本发布
-   基础功能完整
-   文档齐全
-   测试通过

---

## 注意事项

1. **版本号**: 严格按照语义化版本规范
2. **测试**: 确保所有测试通过
3. **文档**: 保持文档与代码同步
4. **依赖**: 检查依赖版本兼容性
5. **安全**: 检查安全漏洞
6. **性能**: 确保性能没有回归
